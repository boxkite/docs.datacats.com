

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>User Guide &mdash; datacats 1.2.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/datacats_theme.css" type="text/css" />
  

  

  
    <link rel="top" title="datacats 1.2.0 documentation" href="index.html"/>
        <link rel="next" title="FAQ" href="faq.html"/>
        <link rel="prev" title="Quickstart" href="quickstart.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> datacats
          

          
          </a>

          
            
            
              <div class="version">
                1.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-datacats">What is datacats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-datacats">Install datacats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-docker">Install Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-virtualenv-environment">Create a virtualenv environment:</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#osx">OSX</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#install-datacats-command-line-tool">Install datacats</a></li>
<li class="toctree-l3"><a class="reference internal" href="#download-the-necessary-docker-containers">Download the necessary Docker containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-from-source">Install from source</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extensions-customization">Extensions &amp; Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploying">Deploying</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shell-access">Shell Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="#paster-commands">Paster Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#developing-on-ckan-using-datacats">Developing on CKAN using DataCats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#multisite">Multisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logs">Logs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">How datacats uses Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">datacats</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>User Guide</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
<span id="forkongithub"><a href="https://github.com/datacats/datacats">Fork me on GitHub</a></span>
  <div class="section" id="user-guide">
<h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-datacats">
<h2>What is datacats<a class="headerlink" href="#what-is-datacats" title="Permalink to this headline">¶</a></h2>
<p>CKAN can be quite difficult to develop and deploy, especially for beginners.
The aim of datacats is to make this easier and bring CKAN within reach for a
much wider audience.</p>
<p>datacats relies on <a class="reference external" href="https://www.docker.com/">Docker</a> to &#8220;containerize&#8221; the CKAN environment. If you don&#8217;t
know much about Docker, it doesn&#8217;t matter. You need to know very little about
it in order to use datacats. If you wish to know more about how
this project works, take a look at <a class="reference internal" href="docker.html"><em>How datacats uses Docker</em></a>.</p>
</div>
<div class="section" id="install-datacats">
<h2>Install datacats<a class="headerlink" href="#install-datacats" title="Permalink to this headline">¶</a></h2>
<p>Getting datacats ready for work involves three parts:</p>
<ul class="simple">
<li><a class="reference internal" href="#install-docker">Install Docker</a></li>
<li><a class="reference internal" href="#create-a-virtualenv-environment">Create a virtualenv environment</a></li>
<li><a class="reference internal" href="#install-datacats-command-line-tool">Install datacats command line tool</a></li>
<li><a class="reference internal" href="#download-the-necessary-docker-containers">Download the necessary Docker containers</a></li>
</ul>
<p>datacats currently supports <strong>Linux</strong> and <strong>OSX</strong> (Apple computers) operating systems out of the box.</p>
<p>Windows is not supported natively just yet even though we are working on it.
For now, you can run datacats on Windows using a Linux
Virtual Machine. Simply install VirtualBox or VMWare, create a Ubuntu VM (Virtual Machine), and install datacats on top of it.</p>
<div class="section" id="install-docker">
<span id="id1"></span><h3>Install Docker<a class="headerlink" href="#install-docker" title="Permalink to this headline">¶</a></h3>
<p>You will need to install Docker first.
Detailed OS-specific reference on how to do that is available at the
<a class="reference external" href="https://docs.docker.com/installation/#installation">Installation Instructions section on Docker site</a> .</p>
<p>Here is the quick OS-specific summary that is sufficient in most cases:</p>
</div>
<div class="section" id="create-a-virtualenv-environment">
<span id="id2"></span><h3>Create a virtualenv environment:<a class="headerlink" href="#create-a-virtualenv-environment" title="Permalink to this headline">¶</a></h3>
<p>We recommend you use datacats inside a virtualenv environment. To install
<a class="reference external" href="http://virtualenv.readthedocs.org/en/latest/index.html">virtualenv</a> run the following in your shell:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install virtualenv
virtualenv myckan
. myckan/bin/activate
</pre></div>
</div>
<div class="section" id="linux">
<h4>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h4>
<p>Unfortunately, to date, some
OS package installation tools (like apt-get on <strong>Ubuntu</strong>) still only offer obsolete
versions of Docker by default which datacats does not support.</p>
<p>The surest way to install the most recent version of Docker
is to use the official installation script from the Docker website.</p>
<p>Open your shell and run the command:</p>
<div class="highlight-python"><div class="highlight"><pre>wget -qO- https://get.docker.com/ | sh
</pre></div>
</div>
<p>This command uses <code class="docutils literal"><span class="pre">wget</span></code> tool to download the script from the website and then runs it
in a shell (<code class="docutils literal"><span class="pre">sh</span></code>).</p>
<p>Another potential ground for complications is that Docker needs
Linux kernel version 3.10 or higher.
Updating your Linux distribution to the more recent version should address that.
In Ubuntu, version Ubuntu Saucy 13.10 or higher is sufficient.</p>
</div>
<div class="section" id="osx">
<h4>OSX<a class="headerlink" href="#osx" title="Permalink to this headline">¶</a></h4>
<p>You will need <a class="reference external" href="https://docs.docker.com/installation/mac/">docker-machine</a>, the standard way to get Docker running on your Mac.</p>
</div>
</div>
<div class="section" id="install-datacats-command-line-tool">
<span id="id3"></span><h3>Install datacats<a class="headerlink" href="#install-datacats-command-line-tool" title="Permalink to this headline">¶</a></h3>
<p>The easiest way to install datacats is with <code class="docutils literal"><span class="pre">pip</span></code>. Making sure your virtualenv
is activated, in your shell run the following:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install datacats
</pre></div>
</div>
<p>If you do not have <code class="docutils literal"><span class="pre">pip</span></code> installed, you can install it first by running:</p>
<div class="highlight-python"><div class="highlight"><pre>easy_install pip
</pre></div>
</div>
</div>
<div class="section" id="download-the-necessary-docker-containers">
<span id="id4"></span><h3>Download the necessary Docker containers<a class="headerlink" href="#download-the-necessary-docker-containers" title="Permalink to this headline">¶</a></h3>
<p>As a last setup step, we need to pull the Docker images needed to
create your environment. This only needs to happen <strong>once</strong>. Those images are
then re-used for all subsequent environments you create.</p>
<p>To pull the Docker images just run:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats pull
</pre></div>
</div>
<p>That is it, you are all set!</p>
</div>
<div class="section" id="install-from-source">
<h3>Install from source<a class="headerlink" href="#install-from-source" title="Permalink to this headline">¶</a></h3>
<p>A more advanced option is to install datacats directly from the source code.</p>
<p>This option may be needed if are considering contributing to the datacats development
or would like to try the most recent (and potentially unstable) version.</p>
<p>To install datacats directly from the <a class="reference external" href="https://github.com/datacats/datacats">source code repository on Github</a>,
clone the source repo to your custom location and
install datacats as a Python package from there:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone git@github.com:datacats/datacats.git
python setup.py develop
</pre></div>
</div>
<p>You will still need to download the necessary Docker images as described above.</p>
</div>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Create a datacats environment. Open a shell and run:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats create catstown
</pre></div>
</div>
<img alt="_images/overview.png" src="_images/overview.png" />
<p>Once done, a datacats source directory is created for you called
<code class="docutils literal"><span class="pre">catstown</span></code>.
You will be prompted to create an admin password for your site. You can
use this password to log into your CKAN site. The address of your CKAN
site will be printed.
To open that address in a web browser at any time, you can run:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats open catstown
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>All <code class="docutils literal"><span class="pre">datacats</span></code> commands work without having to specify the environment
to run them on, as long as you are within a datacats source directory
or any sub-directory. For the above command, we could as well have ran:</p>
<div class="last highlight-python"><div class="highlight"><pre>cd catstown/
datacats open
</pre></div>
</div>
</div>
<p>Let&#8217;s see what is inside our new source directory. <code class="docutils literal"><span class="pre">cd</span></code> into the directory
and take a look at the file structure. You should see something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>catstown/
|-ckan/
|-ckanext-catstowntheme/
|-development.ini
|-schema.xml
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">ckan/</span></code> directory is the <a class="reference external" href="http://github.com/ckan/ckan">source code of the CKAN project</a>. By default,
datacats will initialize each project with the lastest version of CKAN. You can
change the version you wish to run by going into that directory and checking
out a different branch or tag. Alternatively, if you know ahead of time which
version of CKAN you wish to run, you can pass a flag directly to the
<code class="docutils literal"><span class="pre">datacats</span> <span class="pre">create</span></code> command.</p>
<p>The <code class="docutils literal"><span class="pre">ckanext-catstowntheme</span></code> directory is an auto-generated sample
<a class="reference external" href="http://extensions.ckan.org/">CKAN extension</a>.
While you can use CKAN in it&#8217;s default form, most organizations and governments
deploying CKAN customize it in some way. Many forms of customization, such as
<a class="reference external" href="http://docs.ckan.org/en/latest/theming/index.html">designing your own custom theme</a>, do not require a deep knowledge of CKAN. The
<code class="docutils literal"><span class="pre">ckanext-catstowntheme</span></code> extension gives you a very basic skeleton which you
can use to get started.</p>
<p>The <code class="docutils literal"><span class="pre">development.ini</span></code> file holds all the configuration options for CKAN.
All of these options are described <a class="reference external" href="http://docs.ckan.org/en/latest/maintaining/configuration.html">here</a>. Open this file and find a
line that starts with <code class="docutils literal"><span class="pre">ckan.plugins</span></code>. It will look something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>ckan.plugins = datastore text_preview recline_preview catstown_theme
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">catstown_theme</span></code> is the extension endpoint for our kittyville extension,
defined in <code class="docutils literal"><span class="pre">ckanext-catstowntheme/setup.py</span></code>. We can enable and disable our
extension by adding it or removing it from the plugins list above.</p>
</div>
<div class="section" id="extensions-customization">
<h2>Extensions &amp; Customization<a class="headerlink" href="#extensions-customization" title="Permalink to this headline">¶</a></h2>
<p>To see how this works, let us install another extension into our environment.
A good one to use is <a class="reference external" href="http://github.com/ckan/ckanext-pages">pages</a>, which adds a simple CMS to CKAN so we can add
custom content pages to our site. First, clone the pages source code into your
source directory. In the <code class="docutils literal"><span class="pre">catstown/</span></code> source directory, run:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone git@github.com:ckan/ckanext-pages.git
</pre></div>
</div>
<p>This will clone the source into the ckanext-pages/ directory, right next to
<code class="docutils literal"><span class="pre">ckan/</span></code> and <code class="docutils literal"><span class="pre">ckanext-catstowntheme/</span></code> like so:</p>
<div class="highlight-python"><div class="highlight"><pre>kittyville/
|-ckan/
|-ckanext-catstowntheme/
|-ckanext-pages/
|-development.ini
|-schema.xml
</pre></div>
</div>
<p>Next, install this extension into your environment by running:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats install
</pre></div>
</div>
<p>The install command will iterate through your source directory and install
all your extensions. After this is complete, we need to open the <code class="docutils literal"><span class="pre">development.ini</span></code>
file again and add the pages extension to our list of installed extensions:</p>
<div class="highlight-python"><div class="highlight"><pre>ckan.plugins = datastore text_preview recline_preview catstown_theme pages
</pre></div>
</div>
<p>Finally, reload CKAN for the config changes to take effect:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats reload
</pre></div>
</div>
<p>And our extension is now live! Open up your CKAN site, log into it, and you should
see a button in the top toolbar that will let you create custom content pages.</p>
</div>
<div class="section" id="deploying">
<h2>Deploying<a class="headerlink" href="#deploying" title="Permalink to this headline">¶</a></h2>
<p>To deploy your datacats site just rsync your source directory to the
target host, then in the target source directory run:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats init --image-only
</pre></div>
</div>
<p>You can start your new site in production mode with:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats start --production --address=&lt;IP-address&gt;
</pre></div>
</div>
<p>You will need to set up DNS and, emails, logs etc.
To understand a bit
more about how datacats works under-the-hood. See <a class="reference internal" href="docker.html"><em>How datacats uses Docker</em></a></p>
</div>
<div class="section" id="shell-access">
<h2>Shell Access<a class="headerlink" href="#shell-access" title="Permalink to this headline">¶</a></h2>
<p>To run an interactive shell within your CKAN environment, run:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats shell catstown
</pre></div>
</div>
<p>Where <code class="docutils literal"><span class="pre">catstown</span></code> is your datacats environment name. The shell will immediately
drop you inside your source directory, and it will activate the <code class="docutils literal"><span class="pre">virtualenv</span></code>.
The shell is useful if you want to run admin <code class="docutils literal"><span class="pre">paster</span></code> tasks such as database
migrations, or you simply want to poke around your CKAN site.</p>
</div>
<div class="section" id="paster-commands">
<h2>Paster Commands<a class="headerlink" href="#paster-commands" title="Permalink to this headline">¶</a></h2>
<p>To quickly run CKAN <code class="docutils literal"><span class="pre">paster</span></code> commands, you can do the following:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats paster sysadmin add joe
</pre></div>
</div>
<p>Take a look at the <a class="reference external" href="http://docs.ckan.org/en/latest/maintaining/paster.html">CKAN paster page</a> for a list of available commands.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">With datacats, you don&#8217;t need to worry about activating your <code class="docutils literal"><span class="pre">virtualenv</span></code>,
and you do not need to pass the <code class="docutils literal"><span class="pre">--config</span></code> option to paster. You also
do not need to specify the <code class="docutils literal"><span class="pre">--plugin=ckan</span></code> option.
datacats handles this for you automatically.</p>
</div>
<p>If you have <code class="docutils literal"><span class="pre">paster</span></code> commands inside your CKAN extensions, you can <code class="docutils literal"><span class="pre">cd</span></code> into
the extension directory and run the command from there:</p>
<div class="highlight-python"><div class="highlight"><pre>cd ckanext-archiver/
datacats paster archiver clean
</pre></div>
</div>
</div>
<div class="section" id="developing-on-ckan-using-datacats">
<h2>Developing on CKAN using DataCats<a class="headerlink" href="#developing-on-ckan-using-datacats" title="Permalink to this headline">¶</a></h2>
<p>In this section, we will provide you with some tips on how to develop on CKAN
itself using datacats.</p>
<p>The first datacats feature that allows for easy development of CKAN is the ease
of setting up a fully installed and ready-to-go debuggable instance of the master
branch:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats create --ckan=master ckandev
cd ckandev/ckan
git pull
datacats reload
</pre></div>
</div>
<p>You will now be able to edit the ckandev/ckan directory and see your changes
instantly reflected in your CKAN instance (which you can open with the
datacats open command).</p>
<p>Another feature we provide to make development easier is an interactive shell
function for our reload and create commands (this assumes the previous
commands were run). The interactive option allows you to see the output
directly from CKAN in your shell:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats reload --interactive ckandev
</pre></div>
</div>
</div>
<div class="section" id="multisite">
<h2>Multisite<a class="headerlink" href="#multisite" title="Permalink to this headline">¶</a></h2>
<p>As of version 1.0.0, datacats has support for having multiple &#8220;sites&#8221; under a
single environment. This means that there can exist several discrete data
catalogues based on the same CKAN source. This is done using the -s switch,
which can be applied to all commands that make sense to operate on a single
site (currently all commands excluding <code class="docutils literal"><span class="pre">migrate</span></code>, <code class="docutils literal"><span class="pre">pull</span></code>, <code class="docutils literal"><span class="pre">less</span></code>, and
<code class="docutils literal"><span class="pre">install</span></code>). By default, datacats will operate on a site named &#8216;primary&#8217;.</p>
<p>For example, to initialize a site with the name &#8216;sandbox&#8217; under a pre-existing
environment called &#8216;catstown&#8217;, you could run the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats init -s sandbox catstown
</pre></div>
</div>
<img alt="_images/overview-sites.png" src="_images/overview-sites.png" />
<p>This would create all the necessary containers and folders for the site and
begin running it on an appropriate (non-conflicting) port.</p>
</div>
<div class="section" id="logs">
<h2>Logs<a class="headerlink" href="#logs" title="Permalink to this headline">¶</a></h2>
<p>To see the log output of your CKAN:</p>
<div class="highlight-python"><div class="highlight"><pre>datacats logs
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="faq.html" class="btn btn-neutral float-right" title="FAQ" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral" title="Quickstart" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, boxkite.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>